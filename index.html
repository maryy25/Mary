<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙÙƒÙ’ØªÙØ¨ÙØ©Ù Ù…ÙØ§Ø±ÙÙŠ ğŸ¦‹ğŸ€</title>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Great+Vibes&family=Amiri:wght@700&display=swap" rel="stylesheet">
    
    <!-- Ø§Ù„Ù…ÙƒØ§ØªØ¨ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Tailwind Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: { 
                    fontFamily: { 
                        sans: ['Tajawal', 'sans-serif'],
                        script: ['"Great Vibes"', 'cursive'],
                        deco: ['"Amiri"', 'serif'],
                    },
                    colors: {
                        primary: '#db2777',
                        secondary: '#fce7f3',
                        darkBg: '#1a1025',
                        darkCard: '#2d1b36',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Tajawal', sans-serif; transition: background-color 0.3s, color 0.3s; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .category-btn.active { background-color: #db2777; color: white; border-color: #db2777; }
        
        .dark .category-btn.active { background-color: #be185d; border-color: #be185d; }
        .dark .category-btn:not(.active) { background-color: #2d1b36; color: #fce7f3; border-color: #4a3055; }
    </style>
</head>

<body class="min-h-screen bg-pink-50 text-gray-800 dark:bg-darkBg dark:text-pink-100 relative selection:bg-pink-200">

    <!-- Ø§Ù„Ø±Ø£Ø³ -->
    <header class="bg-gradient-to-r from-pink-600 to-rose-500 dark:from-pink-900 dark:to-purple-900 text-white shadow-lg sticky top-0 z-40 transition-colors duration-300">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md border-2 border-pink-200">
                        <span class="font-script text-3xl text-pink-600 pt-1 pr-1 font-bold">My</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <h1 class="text-3xl font-deco font-bold tracking-wide text-white drop-shadow-md">Ù…ÙÙƒÙ’ØªÙØ¨ÙØ©Ù Ù…ÙØ§Ø±ÙÙŠ</h1>
                        <span class="bg-white/20 px-2 py-1 rounded-full text-xl shadow-sm border border-white/10">ğŸ¦‹ğŸ€</span>
                    </div>
                </div>

                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠØ© -->
                <div class="flex gap-3">
                    <button onclick="toggleDarkMode()" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition shadow-sm" title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                        <i data-lucide="moon" class="w-6 h-6 dark:hidden"></i>
                        <i data-lucide="sun" class="w-6 h-6 hidden dark:block text-yellow-300"></i>
                    </button>
                    <button onclick="filterFavorites()" id="favFilterBtn" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition shadow-sm" title="Ø§Ù„Ù…ÙØ¶Ù„Ø©">
                        <i data-lucide="heart" class="w-6 h-6 fill-current"></i>
                    </button>
                </div>
            </div>
            
            <!-- Ø§Ù„Ø¨Ø­Ø« -->
            <div class="mt-4 relative max-w-xl mx-auto">
                <input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø±ÙˆØ§ÙŠØ©..." 
                    class="w-full pr-10 pl-4 py-2 rounded-full text-gray-800 border-2 border-pink-300 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-200 dark:bg-darkCard dark:text-white dark:border-purple-500"
                    oninput="handleSearch(this.value)">
                <i data-lucide="search" class="absolute right-3 top-2.5 text-pink-400 w-5 h-5"></i>
            </div>
        </div>
    </header>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³Ø§Øª -->
    <div class="bg-white dark:bg-darkCard border-b border-pink-100 dark:border-purple-900 py-3">
        <div class="container mx-auto px-4 text-center">
            <p id="quoteDisplay" class="text-pink-600 dark:text-pink-300 font-deco text-lg italic animate-fade-in">
                "Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù‡ÙŠ Ø£Ù† ØªØ°Ù‡Ø¨ Ø¨Ø¹Ù‚Ù„Ùƒ ÙˆÙ…Ø´Ø§Ø¹Ø±Ùƒ Ø®Ø§Ø±Ø¬ Ø­Ø¯ÙˆØ¯ Ù…ÙƒØ§Ù†Ùƒ ÙˆØ²Ù…Ø§Ù†Ùƒ."
            </p>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container mx-auto px-4 py-6 pb-20">
        
        <!-- Ø³Ù„Ø§ÙŠØ¯Ø± Ø£Ø­Ø¯Ø« Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª -->
        <div id="featuredSection" class="mb-8 hidden">
            <h2 class="text-2xl font-bold text-pink-700 dark:text-pink-400 mb-4 flex items-center gap-2">
                <i data-lucide="flame" class="w-6 h-6"></i> Ø£Ø­Ø¯Ø« Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª
            </h2>
            <div id="featuredContainer" class="flex gap-4 overflow-x-auto pb-4 no-scrollbar snap-x">
                <!-- ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
        <div id="categoriesContainer" class="flex gap-3 overflow-x-auto pb-4 mb-2 no-scrollbar whitespace-nowrap"></div>

        <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <div id="loadingState" class="text-center py-20">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mb-4"></div>
            <p class="text-pink-600 dark:text-pink-400 text-lg">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆØ§ÙŠØ§Øª...</p>
        </div>

        <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø±ÙˆØ§ÙŠØ§Øª -->
        <div id="novelsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden"></div>

        <!-- Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© -->
        <div id="emptyState" class="hidden text-center py-20 text-gray-400 dark:text-gray-500">
            <p class="text-xl text-pink-400 dark:text-pink-600 font-bold font-deco">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ğŸ¦‹</p>
        </div>
    </div>

    <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
    <footer class="bg-pink-100 dark:bg-darkCard py-6 mt-10 text-center border-t border-pink-200 dark:border-purple-900">
        <p class="text-pink-800 dark:text-pink-200 mb-2 font-bold">Ù„Ù… ØªØ¬Ø¯ Ø±ÙˆØ§ÙŠØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©ØŸ</p>
        <a href="https://docs.google.com/forms" target="_blank" class="inline-flex items-center gap-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition shadow-md">
            <i data-lucide="edit-3" class="w-4 h-4"></i> Ø§Ø·Ù„Ø¨ Ø±ÙˆØ§ÙŠØ©
        </a>
        <p class="text-xs text-pink-400 mt-4 font-script text-xl">Made with love for Mary's Library</p>
    </footer>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
    <div id="detailsModal" class="fixed inset-0 bg-pink-900/60 dark:bg-black/80 backdrop-blur-sm hidden items-center justify-center p-4 z-50" onclick="closeDetailsModal()">
        <div class="bg-white dark:bg-darkCard rounded-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto no-scrollbar shadow-2xl relative border-2 border-pink-100 dark:border-purple-900 flex flex-col md:flex-row" onclick="event.stopPropagation()">
            
            <button onclick="closeDetailsModal()" class="absolute top-4 left-4 bg-white/80 dark:bg-black/50 p-2 rounded-full hover:bg-white z-10 shadow-md text-gray-800 dark:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
            <div class="w-full md:w-1/3 relative">
                <img id="modalCover" src="" class="w-full h-64 md:h-full object-cover">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-pink-900/90 to-transparent p-6 pt-20 md:hidden">
                    <h2 id="modalTitleMobile" class="text-2xl font-bold text-white drop-shadow-md font-deco"></h2>
                </div>
            </div>

            <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
            <div class="w-full md:w-2/3 p-6 md:p-8 flex flex-col">
                <div class="hidden md:block mb-4">
                    <span id="modalCategory" class="text-xs font-bold bg-pink-100 dark:bg-purple-900 text-pink-600 dark:text-pink-200 px-3 py-1 rounded-full mb-2 inline-block"></span>
                    <h2 id="modalTitle" class="text-3xl font-bold text-pink-800 dark:text-white font-deco"></h2>
                    <p id="modalAuthor" class="text-gray-500 dark:text-gray-400 mt-1"></p>
                </div>

                <div class="mb-6 flex-1 overflow-y-auto max-h-40 md:max-h-60">
                    <h3 class="text-lg font-bold text-pink-700 dark:text-pink-400 mb-2 flex items-center gap-2">
                        <i data-lucide="file-text" class="w-5 h-5"></i> Ø§Ù„Ù‚ØµØ©
                    </h3>
                    <p id="modalDescription" class="text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line"></p>
                </div>

                <div class="flex gap-3 mt-auto pt-4 border-t border-pink-100 dark:border-purple-800">
                    <button id="readNowBtn" onclick="toggleReadMode()" class="flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white py-3 rounded-xl font-bold hover:shadow-lg transition">
                        <i data-lucide="book-open" class="w-5 h-5"></i> Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¢Ù†
                    </button>
                    <button onclick="shareNovel()" class="px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-white rounded-xl hover:bg-gray-200 transition" title="Ù…Ø´Ø§Ø±ÙƒØ©">
                        <i data-lucide="share-2" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <div id="readerContainer" class="hidden mt-4 h-96 w-full bg-gray-100 dark:bg-gray-900 rounded-lg overflow-hidden border border-gray-300 relative">
                    <iframe id="pdfFrame" src="" class="w-full h-full" frameborder="0"></iframe>
                    <button onclick="toggleReadMode()" class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded shadow">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQroSmC0_KFPc19QWPzhaMRp8V16m2oVTBOloGJMofxw15Scq1YzomQj-So8e_E1IopP1VLyyh4v95Z/pub?output=csv"; 
        
        let novels = [];
        let searchTerm = '';
        let currentCategory = 'Ø§Ù„ÙƒÙ„';
        let favorites = JSON.parse(localStorage.getItem('maryFavs')) || [];
        let showingFavorites = false;
        let currentNovelLink = '';

        document.addEventListener('DOMContentLoaded', () => {
            loadDataFromSheet();
            checkDarkMode();
            lucide.createIcons();
            // ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ø£Ù† Ø§Ù„Ù†Øµ Ø£ØµØ¨Ø­ Ø«Ø§Ø¨ØªØ§Ù‹ ÙÙŠ HTML
        });

        // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function loadDataFromSheet() {
            Papa.parse(SHEET_URL, {
                download: true,
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    novels = results.data.filter(n => n.title && n.title.trim() !== "");
                    setupCategories();
                    renderFeatured();
                    document.getElementById('loadingState').classList.add('hidden');
                    document.getElementById('novelsGrid').classList.remove('hidden');
                    renderNovels();
                },
                error: () => document.getElementById('loadingState').innerHTML = "<p class='text-red-500'>ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ÙƒØªØ¨Ø©</p>"
            });
        }

        // 2. Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('maryDarkMode', isDark);
        }
        function checkDarkMode() {
            if (localStorage.getItem('maryDarkMode') === 'true') {
                document.documentElement.classList.add('dark');
            }
        }

        // 3. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function toggleFavorite(title, event) {
            event.stopPropagation();
            if (favorites.includes(title)) {
                favorites = favorites.filter(t => t !== title);
            } else {
                favorites.push(title);
            }
            localStorage.setItem('maryFavs', JSON.stringify(favorites));
            renderNovels();
        }
        function filterFavorites() {
            showingFavorites = !showingFavorites;
            const btn = document.getElementById('favFilterBtn');
            btn.classList.toggle('bg-pink-500', showingFavorites);
            btn.classList.toggle('text-white', showingFavorites);
            renderNovels();
        }

        // 4. Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±
        function setupCategories() {
            const container = document.getElementById('categoriesContainer');
            const categories = ['Ø§Ù„ÙƒÙ„', ...new Set(novels.map(n => n.category).filter(c => c))];
            container.innerHTML = categories.map(cat => `
                <button onclick="filterByCategory('${cat}')" class="category-btn ${cat === 'Ø§Ù„ÙƒÙ„' ? 'active' : ''} px-6 py-2 rounded-full border border-pink-200 text-pink-700 dark:text-pink-300 font-bold bg-white dark:bg-darkCard hover:bg-pink-50 dark:hover:bg-gray-700 whitespace-nowrap shadow-sm">
                    ${cat}
                </button>
            `).join('');
        }
        function renderFeatured() {
            const container = document.getElementById('featuredContainer');
            const featuredSection = document.getElementById('featuredSection');
            const latest = novels.slice(0, 5);
            
            if (latest.length > 0) {
                featuredSection.classList.remove('hidden');
                container.innerHTML = latest.map(novel => `
                    <div class="snap-start shrink-0 w-40 cursor-pointer group" onclick="openDetails('${novel.title}')">
                        <div class="relative h-56 rounded-xl overflow-hidden mb-2 shadow-md">
                            <img src="${novel.cover}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                            <span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow">Ø¬Ø¯ÙŠØ¯</span>
                        </div>
                        <h3 class="font-bold text-sm text-gray-800 dark:text-gray-200 truncate">${novel.title}</h3>
                    </div>
                `).join('');
            }
        }

        // 5. Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        function filterByCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.toggle('active', btn.innerText === cat);
            });
            renderNovels();
        }

        function renderNovels() {
            const grid = document.getElementById('novelsGrid');
            const empty = document.getElementById('emptyState');
            
            const filtered = novels.filter(n => {
                const search = n.title.toLowerCase().includes(searchTerm.toLowerCase());
                const cat = currentCategory === 'Ø§Ù„ÙƒÙ„' || n.category === currentCategory;
                const fav = !showingFavorites || favorites.includes(n.title);
                return search && cat && fav;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '';
                empty.classList.remove('hidden');
            } else {
                empty.classList.add('hidden');
                grid.innerHTML = filtered.map((novel, index) => {
                    const isFav = favorites.includes(novel.title);
                    const isNew = index < 5 && currentCategory === 'Ø§Ù„ÙƒÙ„' && !searchTerm;
                    
                    return `
                    <div class="bg-white dark:bg-darkCard rounded-xl shadow-md overflow-hidden hover:shadow-xl hover:shadow-pink-100 dark:hover:shadow-purple-900 transition duration-300 border border-pink-100 dark:border-purple-900 flex flex-col h-full relative group cursor-pointer" onclick="openDetails('${novel.title}')">
                        
                        <div class="h-64 overflow-hidden relative bg-gray-200 dark:bg-gray-800">
                            <img src="${novel.cover || 'https://via.placeholder.com/400x600?text=Cover'}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" onerror="this.src='https://via.placeholder.com/400x600?text=No+Cover'">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4">
                                 <span class="text-white text-xs bg-pink-500 px-2 py-1 rounded-full mb-1 inline-block">${novel.category || 'Ø¹Ø§Ù…'}</span>
                            </div>
                            <button onclick="toggleFavorite('${novel.title}', event)" class="absolute top-2 left-2 p-2 rounded-full bg-white/80 dark:bg-black/50 hover:scale-110 transition shadow-sm">
                                <i data-lucide="heart" class="w-5 h-5 ${isFav ? 'fill-red-500 text-red-500' : 'text-gray-600 dark:text-gray-300'}"></i>
                            </button>
                            ${isNew ? '<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow">Ø¬Ø¯ÙŠØ¯</span>' : ''}
                        </div>
                        
                        <div class="p-4 flex-1 flex flex-col justify-between">
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-1 font-deco">${novel.title}</h3>
                                <p class="text-gray-500 dark:text-gray-400 text-sm mb-3">âœï¸ ${novel.author || 'Ù…Ø¬Ù‡ÙˆÙ„'}</p>
                            </div>
                            <button class="w-full bg-pink-50 dark:bg-gray-700 text-pink-700 dark:text-pink-300 py-2 rounded-lg font-bold hover:bg-pink-100 dark:hover:bg-gray-600 transition flex items-center justify-center gap-2">
                                <i data-lucide="eye" class="w-4 h-4"></i> Ø§Ù„ØªÙØ§ØµÙŠÙ„
                            </button>
                        </div>
                    </div>
                `}).join('');
                lucide.createIcons();
            }
        }

        // 6. Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø©
        function openDetails(title) {
            const novel = novels.find(n => n.title === title);
            if(!novel) return;

            document.getElementById('modalTitle').innerText = novel.title;
            document.getElementById('modalTitleMobile').innerText = novel.title;
            document.getElementById('modalAuthor').innerText = `Ø¨Ù‚Ù„Ù…: ${novel.author}`;
            document.getElementById('modalCategory').innerText = novel.category;
            document.getElementById('modalDescription').innerText = novel.description || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ.";
            document.getElementById('modalCover').src = novel.cover;
            
            let link = novel.pdfLink;
            if (link && link.includes('drive.google.com') && link.includes('/view')) {
                link = link.replace('/view', '/preview');
            }
            currentNovelLink = link;

            document.getElementById('readerContainer').classList.add('hidden');
            document.getElementById('pdfFrame').src = "";
            
            document.getElementById('detailsModal').classList.replace('hidden', 'flex');
        }

        function toggleReadMode() {
            const container = document.getElementById('readerContainer');
            const frame = document.getElementById('pdfFrame');
            
            if (container.classList.contains('hidden')) {
                if(currentNovelLink) {
                    frame.src = currentNovelLink;
                    container.classList.remove('hidden');
                } else {
                    alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø±ÙˆØ§ÙŠØ©");
                }
            } else {
                container.classList.add('hidden');
                frame.src = "";
            }
        }

        function shareNovel() {
            const title = document.getElementById('modalTitle').innerText;
            if (navigator.share) {
                navigator.share({
                    title: `Ø§Ù‚Ø±Ø£ Ø±ÙˆØ§ÙŠØ© ${title} ÙÙŠ Ù…ÙƒØªØ¨Ø© Ù…Ø§Ø±ÙŠ`,
                    text: `Ø£Ù†ØµØ­Ùƒ Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø±ÙˆØ§ÙŠØ© "${title}" Ø§Ù„Ù…Ù…ØªØ¹Ø©!`,
                    url: window.location.href
                });
            } else {
                alert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹!");
            }
        }

        function closeDetailsModal() { document.getElementById('detailsModal').classList.replace('flex', 'hidden'); }
        function handleSearch(val) { searchTerm = val; renderNovels(); }
    </script>
</body>
</html>
